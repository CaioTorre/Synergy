morse = {".-" => "a", "-..." => "b", "-.-." => "c", "-.." => "d", "." => "e", "..-." => "f", "--." => "g", 
"...." => "h", ".." => "i", ".---" => "j", "-.-" => "k", ".-.." => "l", "--" => "m", "-." => "n", "---" => "o", 
".--." => "p", "--.-" => "q", ".-." => "r", "..." => "s", "-" => "t", "..-" => "u", "...-" => "v", ".--" => "w", 
"-..-" => "x", "-.--" => "y", "--.." => "z", "------" => " ",
"-----" => "0", ".----" => "1", "..---" => "2", "...--" => "3", "....-" => "4",
"....." => "5", "-...." => "6", "--..." => "7", "---.." => "8", "----." => "9"}

def checkIfExists str
	morse = {".-" => "a", "-..." => "b", "-.-." => "c", "-.." => "d", "." => "e", "..-." => "f", "--." => "g", 
"...." => "h", ".." => "i", ".---" => "j", "-.-" => "k", ".-.." => "l", "--" => "m", "-." => "n", "---" => "o", 
".--." => "p", "--.-" => "q", ".-." => "r", "..." => "s", "-" => "t", "..-" => "u", "...-" => "v", ".--" => "w", 
"-..-" => "x", "-.--" => "y", "--.." => "z", "------" => " ",
"-----" => "0", ".----" => "1", "..---" => "2", "...--" => "3", "....-" => "4",
"....." => "5", "-...." => "6", "--..." => "7", "---.." => "8", "----." => "9"}
	if (morse[str] != nil)
		return morse[str]
	else
		return ""
	end
end

while true
	print "Code: "
	rcv = gets.chomp
	curr = ""
	res = ""
	for i in 0..(rcv.length-1)
		ana = rcv[i]
		#puts "Analyzing " + ana + " at index " + i.to_s
		if (ana == "." or ana == "-")
			curr << ana
			if (i == rcv.length - 1)
				#puts curr
				res << checkIfExists(curr)
			end
		elsif (ana == " " or ana == "_")
			res << checkIfExists(curr)
			curr = ""
		else
			puts "Unknown char (" + ana + ")"
		end
	end
	puts "Out: " + res
end